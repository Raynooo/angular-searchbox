<pre ng-show="debug">Model: {{selected.key | json}} Value : {{ selected.value | json}} opened : {{ opened }}</pre>
<div class="VS-search">
    <div class="VS-search-box-wrapper VS-search-box form-control">
        <div class="VS-icon VS-icon-search"><span class="glyphicon glyphicon-search"></span></div>
        <div class="VS-placeholder"></div>
        <div class="VS-search-inner">
            <div class="search_parameter" ng-class="{ selected : $index == selectedResult }"
                 ng-repeat="parameter in sbResultList" ng-click="selectResult($index)"
                 repeat-done="test()">
                <div class="search_parameter_remove VS-icon VS-icon-cancel" ng-click="removeFilter($index)"><span class="glyphicon glyphicon-remove"></span></div>
                <div class="key">{{ parameter.key }}</div>
                <div class="value" ><span style="position:relative;z-index:1;display:inline-block;visibility: hidden;" >{{ parameter.value }}</span>
                <input type="text"
                       ng-model="parameter.value"
                       ng-if="(parameter.type == null || parameter.type == 'string')"
                       class="form-control"
                       limit="8"
                       data-min-length="0"
                       style="position:absolute;z-index:2;width:100%;font-size:1em;top:0px;"
                       value="{{ parameter.value }}"
                       ng-options="element.name as element.name + ' (' +element.count+')' for element in getValues(parameter.key) | filter:{name:$viewValue}"
                       sb-focus bs-typeahead>
                <input type="text"
                       ng-model="parameter.value"
                       ng-if="parameter.type == 'date'"
                       class="form-control"
                       data-date-format="dd-MM-yyyy"
                       style="position:absolute;z-index:2;width:100%;font-size:1em;top:0px;"
                       data-autoclose="1"
                       bs-datepicker
                       sb-focus>

                </div>
            </div>
            <div class="search_parameter">
            <input input-facet
                   data-min-length="0"
                   type="text"
                   ng-model="selected.key"
                   data-limit="8"
                   data-trigger="focus"
                   data-animation="am-flip-x"
                   ng-options="element as element.label for element in facetList | filter:{label:$viewValue}"
                   class="form-control input-facet" bs-typeahead>
            </div>
        </div>
        <div class="VS-icon VS-icon-cancel VS-cancel-search-box" title="clear search" ng-click="removeAll()"><span class="glyphicon glyphicon-remove-circle"></span></div>
    </div>
</div>
